# Утебалиев Р. М.  ИКБО-60-24

## Этап 1. Перевод программы в промежуточное представление

## Этап 2. Формирование машинного кода




# Ассемблер для учебной виртуальной машины (УВМ)

## Описание

Компилятор ассемблера, который преобразует текстовый код в машинный код для учебной виртуальной машины (УВМ). Включает CLI-интерфейс, парсер команд и генератор двоичного файла.

## Язык ассемблера УВМ

### Синтаксис команд

Язык использует **мнемонику** (опкод) и **операнды**, разделённые пробелами:

```
МНЕМОНИКА операнд1, операнд2, ...
```


### Поддерживаемые команды

#### 1. LOAD (загрузка константы)
**Мнемоника:** `LOAD`  
**Синтаксис:** `LOAD <константа>`  
**Опкод A:** 102 (0x66)  
**Результат:** Аккумулятор = константа

**Примеры:**
```assembly
LOAD 98        # Загрузить 98 в аккумулятор
LOAD 1024      # Загрузить 1024 в аккумулятор
```

**Бинарное представление:** `0x66, <B_низ>, <B_среда>, <B_высок>`

---

#### 2. READ (чтение из памяти)
**Мнемоника:** `READ`  
**Синтаксис:** `READ <адрес>`  
**Опкод A:** 155 (0x9B)  
**Результат:** Аккумулятор = память[адрес]

**Примеры:**
```assembly
READ 531       # Прочитать значение из памяти[531]
READ 100       # Прочитать значение из памяти[100]
```

**Бинарное представление:** `0x9B, <B_низ>, <B_среда>, <B_высок>`

---

#### 3. WRITE (запись в память)
**Мнемоника:** `WRITE`  
**Синтаксис:** `WRITE <адрес>`  
**Опкод A:** 49 (0x31)  
**Результат:** память[адрес] = Аккумулятор

**Примеры:**
```assembly
WRITE 198      # Записать аккумулятор в память[198]
WRITE 0        # Записать аккумулятор в память[0]
```

**Бинарное представление:** `0x31, <B_низ>, <B_среда>, <B_высок>`

---

#### 4. XOR (побитовое исключающее или)
**Мнемоника:** `XOR`  
**Синтаксис:** `XOR <адрес>`  
**Опкод A:** 136 (0x88)  
**Результат:** Аккумулятор = Аккумулятор XOR память[адрес]

**Примеры:**
```assembly
XOR 306        # Выполнить: аккумулятор = аккумулятор XOR память[306]
XOR 0          # Обнулить аккумулятор (XOR с самим собой = 0)
```

**Бинарное представление:** `0x88, <B_низ>, <B_среда>, <B_высок>`

---

## Формат бинарного файла

Каждая команда занимает **4 байта** в формате **little-endian**:

| Байт | Назначение | Значение |
|------|-----------|----------|
| 0    | Опкод (A) | 49, 102, 136 или 155 |
| 1-3  | Операнд (B) | Константа, адрес или 0 |

**Пример (LOAD 98):**
```
Байт 0: 0x66 (опкод LOAD = 102)
Байт 1: 0x62 (98 в hex = 0x62)
Байт 2: 0x00
Байт 3: 0x00
```



